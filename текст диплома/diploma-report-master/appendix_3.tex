
\newpage
  \begin{center}
  \section{ }%функция кристалла
  \label{sec:sample_functions}
  \end{center}
{\scriptsize
\begin{lstlisting}[language=Python]

#-----------Монохроматор-----------
# статичный элемент
def monohromator(teta, itta, X0, Xh, tetaprmtr_deg, fi):
    tetaprmtr = math.radians(tetaprmtr_deg)
    gamma_0 = math.sin(math.radians(fi) + tetaprmtr)
    gamma_h = math.sin(math.radians(fi) - tetaprmtr)
    b = gamma_0/abs(gamma_h)  # коэффициент ассиметрии
    #брэговского отражения
    C = 1
    monohrom = teta-(itta-1)*math.tan(tetaprmtr)
    # угловая отстройка падающего излучения от угла Брегга
    alfa = -4*math.sin(tetaprmtr) * \
        (math.sin(tetaprmtr+monohrom)-math.sin(tetaprmtr))
    prover = (1/4/gamma_0)* \
        (X0*(1-b)-b*alfa+cmath.sqrt(((X0*(1+b)+b*alfa) * \
        (X0*(1+b)+b*alfa))-4*b*(C*C) * \
        ((Xh.real)*(Xh.real)-(Xh.imag)*(Xh.imag)-2j*Xh.real*Xh.imag)))

    if prover.imag < float(0):
        eps = (1/4/gamma_0)* \
            (X0*(1-b)-b*alfa-cmath.sqrt(((X0*(1+b)+b*alfa) * \
            (X0*(1+b)+b*alfa))-4*b*(C*C) * \
            ((Xh.real)*(Xh.real)-(Xh.imag)*(Xh.imag)-2j*Xh.real*Xh.imag)))
    else:
        eps = prover

    R = (2*eps*gamma_0-X0)/Xh/C
    return (abs(gamma_h)/gamma_0)*abs(R)*abs(R)

#-----------Образец-----------
# подвижный элемент
def sample(dTeta, teta, itta, X0, Xh, tetaprmtr_deg, fi):
    tetaprmtr = math.radians(tetaprmtr_deg)
    gamma_0 = math.sin(math.radians(fi) + tetaprmtr)
    gamma_h = math.sin(math.radians(fi) - tetaprmtr)
    # коэффициент ассиметрии брэговского отражения    # Ignore
    # SpaceConsistencyBear
    b = gamma_0/abs(gamma_h)
    C = 1
    sample = dTeta+teta-(itta-1)*math.tan(tetaprmtr)
    # угловая отстройка падающего излучения от угла Брегга
    alfa = -4*math.sin(tetaprmtr) * \
        (math.sin(tetaprmtr+sample)-math.sin(tetaprmtr))

    prover = (1/4/gamma_0)* \
        (X0*(1-b)-b*alfa+cmath.sqrt(((X0*(1+b)+b*alfa) * \
        (X0*(1+b)+b*alfa))-4*b*(C*C) * \
        ((Xh.real)*(Xh.real)-(Xh.imag)*(Xh.imag)-2j*Xh.real*Xh.imag)))

    if prover.imag < float(0):
        eps = (1/4/gamma_0)* \
            (X0*(1-b)-b*alfa-cmath.sqrt(((X0*(1+b)+b*alfa) * \
            (X0*(1+b)+b*alfa))-4*b*(C*C) * \
            ((Xh.real)*(Xh.real)-(Xh.imag)*(Xh.imag)-2j*Xh.real*Xh.imag)))
    else:
        eps = prover

    R = (2*eps*gamma_0-X0)/Xh/C

    return (abs(gamma_h)/gamma_0)*abs(R)*abs(R)


\end{lstlisting}
}
